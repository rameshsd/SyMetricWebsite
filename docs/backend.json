
{
  "entities": {
    "WebsiteVisit": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "WebsiteVisit",
      "type": "object",
      "description": "Represents a single visit to the SyMetric Systems website.",
      "properties": {
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the visit occurred.",
          "format": "date-time"
        },
        "path": {
          "type": "string",
          "description": "The specific page that was viewed during the visit."
        },
        "userAgent": {
          "type": "string",
          "description": "The user agent string of the visitor's browser."
        },
        "userId": {
          "type": "string",
          "description": "The anonymous or authenticated user ID."
        }
      },
      "required": [
        "timestamp",
        "path",
        "userId"
      ]
    },
    "ContactFormSubmission": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactFormSubmission",
      "type": "object",
      "description": "Represents a submission made through the contact form on the website.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the contact form submission."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the form was submitted.",
          "format": "date-time"
        },
        "name": {
          "type": "string",
          "description": "The name of the person submitting the form."
        },
        "email": {
          "type": "string",
          "description": "The email address of the person submitting the form.",
          "format": "email"
        },
        "organization": {
          "type": "string",
          "description": "The organization the person belongs to."
        },
        "message": {
          "type": "string",
          "description": "The message submitted through the form."
        }
      },
      "required": [
        "id",
        "timestamp",
        "name",
        "email",
        "message"
      ]
    },
    "ResourceInteraction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ResourceInteraction",
      "type": "object",
      "description": "Represents a user interaction with a resource (e.g., blog post, case study).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the resource interaction."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the interaction occurred.",
          "format": "date-time"
        },
        "resourceId": {
          "type": "string",
          "description": "Reference to the Resource that was interacted with."
        },
        "interactionType": {
          "type": "string",
          "description": "Type of interaction (e.g., view, download, share)."
        }
      },
      "required": [
        "id",
        "timestamp",
        "resourceId",
        "interactionType"
      ]
    },
    "Resource": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Resource",
      "type": "object",
      "description": "Represents a resource on the website, such as a blog post or a case study.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the resource."
        },
        "title": {
          "type": "string",
          "description": "Title of the resource."
        },
        "type": {
          "type": "string",
          "description": "Type of resource (e.g., 'blog', 'case study')."
        },
        "publishDate": {
          "type": "string",
          "description": "Date when the resource was published.",
          "format": "date-time"
        },
        "contentUrl": {
          "type": "string",
          "description": "URL where the content can be accessed.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "title",
        "type",
        "publishDate",
        "contentUrl"
      ]
    },
    "Page": {
      "title": "Page",
      "type": "object",
      "description": "Represents a dynamically created page on the website.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the page." },
        "slug": { "type": "string", "description": "The URL-friendly slug for the page." },
        "title": { "type": "string", "description": "The main title of the page." },
        "content": { "type": "string", "description": "The main content of the page, can be markdown or HTML." },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of when the page was created." },
        "updatedAt": { "type": "string", "format": "date-time", "description": "Timestamp of when the page was last updated." }
      },
      "required": ["id", "slug", "title", "content", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/websiteVisits/{websiteVisitId}",
        "definition": {
          "entityName": "WebsiteVisit",
          "schema": {
            "$ref": "#/backend/entities/WebsiteVisit"
          },
          "description": "Stores individual website visit records.  'websiteVisitId' is the unique ID for each visit.",
          "params": [
            {
              "name": "websiteVisitId",
              "description": "Unique identifier for the website visit."
            }
          ]
        }
      },
      {
        "path": "/contactFormSubmissions/{contactFormSubmissionId}",
        "definition": {
          "entityName": "ContactFormSubmission",
          "schema": {
            "$ref": "#/backend/entities/ContactFormSubmission"
          },
          "description": "Stores contact form submissions. 'contactFormSubmissionId' is the unique ID for each submission.",
          "params": [
            {
              "name": "contactFormSubmissionId",
              "description": "Unique identifier for the contact form submission."
            }
          ]
        }
      },
      {
        "path": "/resourceInteractions/{resourceInteractionId}",
        "definition": {
          "entityName": "ResourceInteraction",
          "schema": {
            "$ref": "#/backend/entities/ResourceInteraction"
          },
          "description": "Stores records of user interactions with resources. 'resourceInteractionId' is the unique ID for each interaction.",
          "params": [
            {
              "name": "resourceInteractionId",
              "description": "Unique identifier for the resource interaction."
            }
          ]
        }
      },
      {
        "path": "/resources/{resourceId}",
        "definition": {
          "entityName": "Resource",
          "schema": {
            "$ref": "#/backend/entities/Resource"
          },
          "description": "Stores metadata about resources available on the website (e.g., blog posts, case studies). 'resourceId' is the unique ID for each resource.",
          "params": [
            {
              "name": "resourceId",
              "description": "Unique identifier for the resource."
            }
          ]
        }
      },
      {
        "path": "/pages/{pageId}",
        "definition": {
          "entityName": "Page",
          "schema": {
            "$ref": "#/backend/entities/Page"
          },
          "description": "Stores the content for dynamically created pages. 'pageId' is the unique ID for each page.",
          "params": [
            {
              "name": "pageId",
              "description": "Unique identifier for the page."
            }
          ]
        }
      }
    ],
    "reasoning": "This Firestore structure is designed to support the SyMetric Systems website and its data requirements, focusing on website activity tracking and content management. The structure prioritizes clarity, scalability, and security. Each data entity is stored in its own top-level collection to facilitate querying and management. Denormalization is not strictly necessary in this design as there are no complex access control requirements beyond administrative access. Security rules will primarily focus on preventing public write access and restricting read access where necessary.\n\nThe structure supports required QAPs (Queries and Presentations) by segregating data types into individual collections. This enables efficient querying of website visits, contact form submissions, resource interactions, and resource metadata. Since there is no complex authorization needed the focus is primarily on data organization and efficient querying for dashboard presentations."
  }
}

    